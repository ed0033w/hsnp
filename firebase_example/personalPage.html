<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">

    <title>DASHGUM - Bootstrap Admin Template</title>

    <script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
    <script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyBZWQTLkUTg91JtXHt_npsAPIHbM1dm7_o",
        authDomain: "hsnp-55606.firebaseapp.com",
        databaseURL: "https://hsnp-55606.firebaseio.com",
        projectId: "hsnp-55606",
        storageBucket: "hsnp-55606.appspot.com",
        messagingSenderId: "912083360147"
    };
    firebase.initializeApp(config);
    </script>

   
    <link href="assets/css/bootstrap.css" rel="stylesheet">
   
    <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
        
    <link href="assets/css/fuck.css" rel="stylesheet">
    
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/style-responsive.css" rel="stylesheet">

   
 
    <style> 
   
    input[type=text] {
        width: 150px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        background-image: url('searchicon.png');
        background-position: 10px 10px; 
        background-repeat: no-repeat;
        padding: 10px 10px 10px 20px;
        -webkit-transition: width 0.4s ease-in-out;
        transition: width 0.4s ease-in-out;
    }
    input[type=text]:focus {
        width: 100%;
    }

    </style>
  </head>

  <body>

  <section id="container" >
    
      <header class="header black-bg">
              <div class="sidebar-toggle-box">
                  <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
              </div>
            <!--logo start-->
            <a href="mainPage.html" class="logo"><b>HSNP</b></a>
            <!--logo end-->
            
            <div class="top-menu">
            	<ul class="nav pull-right top-menu" id="signoutSmtBtn">
                    <li><a class="logout" href="" id= "logoutDiv">Logout</a></li>
                    <li><a class="logout" href="login.html" id= "loginDiv">Login</a></li>
            	</ul>
                
                    
            	
            </div>
        </header>
      <!--header end-->
      
      <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
      <!--sidebar start-->
      <aside>
          <div id="sidebar"  class="nav-collapse ">
              <!-- sidebar menu start-->
              <ul class="sidebar-menu" id="nav-accordion">
              
              	  <p class="centered"><a href="profile.html"><img src="assets/img/ui-sam.jpg" class="img-circle" width="60"></a></p>
              	  <h5 class="centered" id="username">qww</h5>
              	  	
                  <li class="mt">
                      <a href="mainPage.html">
                          <i class="fa "></i>
                          <span>mainpage</span>
                      </a>
                  </li>

                  <li class="sub-menu" id = "personalPage">
                      <a href="personalPage.html" >
                          <i class="fa "></i>
                          <span>personal page</span>
                      </a>
                  </li>

                  <li class="sub-menu">
                      <a href="PostQuestion.html" >
                          <i class="fa"></i>
                          <span>post question</span>
                      </a>
                  </li>
                  <li class="sub-menu">
                      <a href="" >
                          <i class="fa "></i>
                          <span>subject</span>
                      </a>
                      <ul class="sub" >
                          <li><a  href="">國文</a></li>
                          <li><a  href="">英文</a></li>
                          <li><a  href="">數學</a></li>
                          <li><a  href="">物理</a></li>
                          <li><a  href="">化學</a></li>
                          <li><a  href="">生物</a></li>
                          <li><a  href="">地科</a></li>
                          <li><a  href="">公民</a></li>
                          <li><a  href="">地理</a></li>
                          <li><a  href="">歷史</a></li>
                      </ul>
                  </li>
                  <li>
                  <input type="text" name="search" placeholder="Search..">
                  </li>
              </ul>
              <!-- sidebar menu end-->
          </div>
          
      </aside>
      <!--sidebar end-->
      
      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <!-- ******HEADER****** --> 

      
      <!--main content start-->
      <br><br>
      <section id="main-content" style="background-color:lightgray;">
          <section class="wrapper site-min-height">

        <div class="primary col-md-12 col-sm-12 col-xs-12">
            <section class="latest section">  
                <div class="container  sections-wrapper section-inner ">                       
                    <img class="profile-image img-responsive pull-left  col-md-3 col-sm-12 col-xs-12" src="head.jpg" style="border-radius:20px;" width="28%" height="42%">
                    <div class="profile-content pull-left col-md-8 col-sm-12 col-xs-12">
                        <h1 class="name" id="name">Little Bear</h1>
                        <h2 class="desc" id="grade">延平高中 二年級</h2>   
                    </div><!--//profile-->
                 </div><!--//container-->
            </section>
        </div>

     <div class="container sections-wrapper">
        <div class="row">
            <div class="primary col-md-8 col-sm-12 col-xs-12">
               <section id="article" class="latest section">
                    <div v-for="card in questionCards" class="section-inner">
                        
                        <br>
                        <h2 class="heading">2017/6/15</h2>
                        <div class="content">    
                                               
                            <div class="item featured text-left">
                                <h3 class="title" style="color:black;">{{card.subject}}</h3>
                                <br>
                                <h3 class="title" style="color:black;">{{card.theme}}</h3>
                                <br>
                                <div class="">
                                    <img :src="card.img" style="border:0px gray solid;" width="70%" height="42%">
                                </div>
                                    
                                <div class="desc text-left">
                                    <h3>說明</h3>                                   
                                    <p>{{card.question_text}}</p>
                                </div><!--//desc-->                          
                            </div><!--//item-->
                            
                        </div><!--//content-->  
                    </div><!--//section-inner-->               
                </section><!--//section-->
                <button id="deleteBtn">delete</button>
            </div><!--//primary-->
            <div class="secondary col-md-4 col-sm-12 col-xs-12">
                 <aside class="info aside section">
                    <div class="section-inner">
                        <h2 class="heading sr-only">Basic Information</h2>
                        <div class="content">
                            <ul class="list-unstyled">
                                <li id="location"><i class="fa fa-map-marker"></i><span class="sr-only">Location:</span>Taipei, Taiwan</li>
                                <li id="email"><i class="fa fa-envelope-o"></i><span class="sr-only">Email:</span><a href="#">littlebear@gmail.com</a></li>
                                <li id="major"><i class="fa fa-pencil"></i><span class="sr-only">Website:</span>國文</li>
                            </ul>
                        </div><!--//content-->  
                    </div><!--//section-inner-->                 
                </aside><!--//aside-->
                
                <aside class="skills aside section">
                    <div class="section-inner">
                        <h2 class="heading">My prize</h2>
                        <div class="content">     
                            <h3 id="ask">我愛發問：&nbsp&nbsp53題</h3>
                            <h3 id="answer">熱心助人：&nbsp&nbsp34題</h3>   
                            <br>             
                            <div class="skillset">
                               
                                <div class="item">
                                    <h3 class="level-title" id="experience">經驗值:&nbsp&nbsp87%<span class="level-label" data-toggle="tooltip" data-placement="left" data-animation="true" title="You can use the tooltip to add more info...">Expert</span></h3>
                                    <div class="level-bar">
                                        <div class="level-bar-inner" data-level="87%">
                                        </div>                                      
                                    </div><!--//level-bar-->                                 
                                </div><!--//item-->
                                
                            </div>              
                        </div><!--//content-->  
                    </div><!--//section-inner-->                 
                </aside><!--//section-->
                            
                
                <aside class="list music aside section">
                    <div class="section-inner">
                        <h2 class="heading">My Note</h2>
                        <div class="content">
                            <ul class="list-unstyled">
                                <li><i class="fa fa-book"></i> <a href="#">高二國文第四課</a></li>
                                <li><i class="fa fa-book"></i> <a href="#">高二數學第三章排列組合</a></li>
                                <li><i class="fa fa-book"></i> <a href="#">高二數學第四章機率</a></li>
                                <li><i class="fa fa-book"></i> <a href="#">高二英文第七章文法</a></li>
                            </ul>
                        </div><!--//content-->
                    </div><!--//section-inner-->
                </aside><!--//section-->
              
            </div><!--//secondary-->    
        </div><!--//row-->
    </div><!--//masonry-->
   

            <div class="primary col-md-1 col-sm-12 col-xs-12">
           </div>


		</section>
      </section><!-- /MAIN CONTENT -->

      <!--main content end-->
     
  </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script src="assets/js/jquery.ui.touch-punch.min.js"></script>
    <script class="include" type="text/javascript" src="assets/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="assets/js/jquery.scrollTo.min.js"></script>
    <script src="assets/js/jquery.nicescroll.js" type="text/javascript"></script>


    <!--common script for all pages-->
    <script src="assets/js/common-scripts.js"></script>
    
    <!--script for this page-->
    <script>
           window.onload = function() {
            var myLi = document.getElementById("signoutSmtBtn").getElementsByTagName('li');

            var calls = [];
            calls[0] = function() { document.getElementById("logoutDiv").style.display = "block"; document.getElementById("loginDiv").style.display = "none";};
            calls[1] = function() { document.getElementById("loginDiv").style.display = "block"; document.getElementById("logoutDiv").style.display = "none";};

            for (i = 0; i < 2; i++) {

                myLi[i].addEventListener('click', calls[i], false);
            }
        };
    firebase.auth().onAuthStateChanged(function(user) {
        //下面是個人頁面變數，但不包含動態產生的部分，例如文章、筆記等
        var username = document.getElementById("username");
        var photo = document.getElementById("photo");
        var name = document.getElementById("name");
        var grade = document.getElementById("grade");
        var location = document.getElementById("location");
        var email = document.getElementById("email");
        var major = document.getElementById("major");
        var ask = document.getElementById("ask");
        var answer = document.getElementById("answer");
        var experience = document.getElementById("experience");
        var signoutSmtBtn = document.getElementById("signoutSmtBtn");
        var deleteBtn = document.getElementById("deleteBtn");
        window.onload = function() {
            var myLi = document.getElementById("signoutSmtBtn").getElementsByTagName('li');

            var calls = [];
            calls[0] = function() { document.getElementById("logoutDiv").style.display = "block"; document.getElementById("loginDiv").style.display = "none";};
            calls[1] = function() { document.getElementById("loginDiv").style.display = "block"; document.getElementById("logoutDiv").style.display = "none";};
            
            for (i = 0; i < 2; i++) {
                
                myLi[i].addEventListener('click', calls[i], false);
            }
        };
        if (user) {
            document.getElementById("loginDiv").style.display = "none";
            document.getElementById("logoutDiv").style.display = "block";
            //sign out
            signoutSmtBtn.addEventListener("click",function(){
                firebase.auth().signOut().then(function() {
                  console.log("User sign out!");
                  alert("登出成功");
                 // window.location.href = 'blank.html';
                }, function(error) {
                  console.log("User sign out error!");
                  alert("登出失敗");
                })
            },false);

            //delete the article
            User = firebase.auth().currentUser;
            deleteBtn.addEventListener("click", function(){
                console.log("1234567890");
                firebase.database().ref('/posts/-Km2IOlax46t1jiJ58n3').remove();
                    
            })

            firebase.database().ref('/users/' + user.uid).once('value').then(function(snapshot) {
            console.log(snapshot.val().username);
            username.textContent = snapshot.val().username;
            //讀取個人網頁名字
            console.log(snapshot.val().username);
            name.textContent = snapshot.val().username;
            //讀取年級+學校
            console.log(snapshot.val().username);
            grade.textContent = snapshot.val().grade + " " + snapshot.val().sub;
            
            //major.textContent = snapshot.val().sub;
            /*
            //讀取地址、信箱、擅長科目、發問、回答、經驗值
            console.log(snapshot.val().username);
            location.textContent = snapshot.val().location;
            console.log(snapshot.val().username);
            email.textContent = snapshot.val().email;
            console.log(snapshot.val().username);
            ask.textContent = snapshot.val().ask;
            console.log(snapshot.val().username);
            answer.textContent = snapshot.val().answer;
            console.log(snapshot.val().username);
            experience.textContent = snapshot.val().experience;
            */
          });
        }
        else{
            document.getElementById("loginDiv").style.display = "block";
            document.getElementById("logoutDiv").style.display = "none";
            document.getElementById("personalPage").style.pointerEvents = "none";
           

          //window.location.href = 'login.html';
          username.textContent = "未登入";
          document.getElementById("signout").textContent = "登入"
          console.log("User is not logined yet.");
        }
  });
  </script> 
  <!-- 動態產生文章 -->
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="./personalpage_new.js"></script>
   
 
  </body>
</html>
